# Plan 01-01: Verify Release Baseline

**Phase:** 01-clean-release
**Wave:** 1
**Depends on:** none

## Goal

Confirm that the existing fix commit (ee9f296) is sound by running the full test suite, staging the two remaining unstaged spec files, committing them, and verifying the working tree is clean and ready to push.

## Context

All code fixes were committed in ee9f296 (test suite, debugLog hooks, workspace hash, version marker fix). The repo is 2 commits ahead of origin/main. However, `git status` shows two unstaged modifications from the planning session:

- `.spec/REQUIREMENTS.md`
- `.spec/ROADMAP.md`

Those must be committed before the working tree is clean. The code under `tests/` runs via Node.js built-in test runner; `npm test` is defined in `package.json` as:

```
node tests/isNewer.test.js && node tests/parseArgs.test.js && node tests/contextMonitor.test.js
```

Expected total: 37 passing tests, zero failures.

## Pre-conditions

- Working directory: `/Users/sharvyahmed/open-source/go-spec`
- On branch `main`
- Commit ee9f296 already present in history
- Node.js >= 18 available

## Tasks

### Task 1: Run the full test suite

**Action:** Execute `npm test` from the repo root and capture output.

**Files:** none (read-only verification)

**Details:**

```
cd /Users/sharvyahmed/open-source/go-spec && npm test
```

Inspect the output for:
- Each test file completing without an uncaught exception
- The summary line confirming all 37 tests pass and 0 fail
- Exit code 0

If any test fails, stop and report the exact failure message. Do not proceed to Task 2.

**Done when:** `npm test` exits with code 0 and output confirms 37 passed, 0 failed.

---

### Task 2: Stage and commit the two unstaged spec files

**Action:** Stage `.spec/REQUIREMENTS.md` and `.spec/ROADMAP.md`, then create a commit.

**Files:**
- `/Users/sharvyahmed/open-source/go-spec/.spec/REQUIREMENTS.md`
- `/Users/sharvyahmed/open-source/go-spec/.spec/ROADMAP.md`

**Details:**

```
git -C /Users/sharvyahmed/open-source/go-spec add .spec/REQUIREMENTS.md .spec/ROADMAP.md
git -C /Users/sharvyahmed/open-source/go-spec commit -m "spec: update REQUIREMENTS and ROADMAP for v1.x planning session"
```

Do not use `git add -A` or `git add .`. Stage only the two named files.

**Done when:** `git -C /Users/sharvyahmed/open-source/go-spec status` shows "nothing to commit, working tree clean" and the new commit appears in `git log --oneline -1`.

---

### Task 3: Confirm working tree is clean and branch is ahead of origin

**Action:** Run git status and git log to verify final state.

**Files:** none (read-only verification)

**Details:**

```
git -C /Users/sharvyahmed/open-source/go-spec status
git -C /Users/sharvyahmed/open-source/go-spec log --oneline origin/main..HEAD
```

Expected output of `git status`: "Your branch is ahead of 'origin/main' by N commits" with no modified, staged, or untracked files listed.

Expected output of `git log`: at least the two commits (ee9f296 and the commit from Task 2) listed ahead of origin/main.

**Done when:** `git status` reports "nothing to commit, working tree clean" and `git log origin/main..HEAD` shows at least 2 commits.

## Success Criteria

- [ ] `npm test` exits 0 with 37 tests passing and 0 failing
- [ ] `.spec/REQUIREMENTS.md` and `.spec/ROADMAP.md` are committed on main
- [ ] `git status` shows "nothing to commit, working tree clean"
- [ ] `git log origin/main..HEAD` shows commits ahead of origin, confirming phase is ready to push

## Notes for Executor

- The `npm test` script runs three files sequentially with `&&`. A failure in an earlier file will suppress output from later files. Check which file failed if exit code is non-zero.
- Do not push to origin during this plan. Pushing is a separate action the maintainer will take after reviewing.
- The two `.spec/` files were modified by the go-spec planning session (not by the code fixes). Their content is already correct; this commit is purely a housekeeping step.
- If `git status` is already clean when Task 2 begins (e.g., the files were already committed by a prior step), skip Task 2 and note it in your report.

## Deviation Policy

**Auto-fix (no need to stop):**
- Missing newline at end of file causing a trivial diff
- Minor formatting issue in commit message

**Stop and report:**
- Any test failure â€” do not attempt to fix test code; report the failure and halt
- Unexpected staged files that were not listed in Task 2 (stage nothing beyond the two named files)
- Merge conflict or detached HEAD state
- Ambiguity about which files are safe to stage
